<!-- HTML header for doxygen 1.12.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>P4 Compiler Documentation (P4C): InstructionMemory Struct Reference</title>
<link rel="icon" href="p4-fav.svg" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!--  Add link to paragraphs   -->
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
  DoxygenAwesomeParagraphLink.init()
</script>
<!-- Add copy button to code fragments  -->
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
  DoxygenAwesomeFragmentCopyButton.init()
</script>
<!-- Add dark mode toggle -->
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
  DoxygenAwesomeDarkModeToggle.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="cards.css" rel="stylesheet" type="text/css"/>
<link href="flow.css" rel="stylesheet" type="text/css"/>
<link href="p4c_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="p4-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">P4C
   </div>
   <div id="projectbrief">The P4 Compiler</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('struct_instruction_memory.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="struct_instruction_memory-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">InstructionMemory Struct Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="instruction__memory_8h_source.html">instruction_memory.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for InstructionMemory:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="struct_instruction_memory__inherit__graph.svg" width="202" height="110"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_instruction_memory_1_1_use.html">Use</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2433595ad310d340628274d7a778f055" id="r_a2433595ad310d340628274d7a778f055"><td class="memItemLeft" align="right" valign="top"><a id="a2433595ad310d340628274d7a778f055" name="a2433595ad310d340628274d7a778f055"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>alloc_always_run_instr</b> (const IR::MAU::Table *tbl, <a class="el" href="struct_instruction_memory_1_1_use.html">Use</a> &amp;alloc, <a class="el" href="class_p4_1_1bitvec.html">bitvec</a> current_bv)</td></tr>
<tr class="separator:a2433595ad310d340628274d7a778f055"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d6be56cb7cdb3de24056eb0f4fa713d" id="r_a1d6be56cb7cdb3de24056eb0f4fa713d"><td class="memItemLeft" align="right" valign="top"><a id="a1d6be56cb7cdb3de24056eb0f4fa713d" name="a1d6be56cb7cdb3de24056eb0f4fa713d"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>allocate_imem</b> (const IR::MAU::Table *tbl, <a class="el" href="struct_instruction_memory_1_1_use.html">Use</a> &amp;alloc, <a class="el" href="class_phv_info.html">PhvInfo</a> &amp;phv, bool gw_linked, <a class="el" href="class_action_data_1_1_format_type__t.html">ActionData::FormatType_t</a> format_type, <a class="el" href="class_split_attached_info.html">SplitAttachedInfo</a> &amp;sai)</td></tr>
<tr class="separator:a1d6be56cb7cdb3de24056eb0f4fa713d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a404e9c716b581020f6d7a57bfd23a439" id="r_a404e9c716b581020f6d7a57bfd23a439"><td class="memItemLeft" align="right" valign="top"><a id="a404e9c716b581020f6d7a57bfd23a439" name="a404e9c716b581020f6d7a57bfd23a439"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>find_row_and_color</b> (<a class="el" href="class_p4_1_1bitvec.html">bitvec</a> current_bv, gress_t gress, int &amp;row, int &amp;color, bool &amp;first_noop, bool has_unalloc_temp=false)</td></tr>
<tr class="separator:a404e9c716b581020f6d7a57bfd23a439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54927756389792efe9919f01587dd574" id="r_a54927756389792efe9919f01587dd574"><td class="memItemLeft" align="right" valign="top"><a id="a54927756389792efe9919f01587dd574" name="a54927756389792efe9919f01587dd574"></a>
const <a class="el" href="class_b_f_n_1_1_alloc2_dbase.html">BFN::Alloc2Dbase</a>&lt; <a class="el" href="class_p4_1_1bitvec.html">bitvec</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>imem_slot_inuse</b> (gress_t gress) const</td></tr>
<tr class="separator:a54927756389792efe9919f01587dd574"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3649463084f9784508a21bae9fa77d49" id="r_a3649463084f9784508a21bae9fa77d49"><td class="memItemLeft" align="right" valign="top"><a id="a3649463084f9784508a21bae9fa77d49" name="a3649463084f9784508a21bae9fa77d49"></a>
virtual <a class="el" href="class_b_f_n_1_1_alloc2_dbase.html">BFN::Alloc2Dbase</a>&lt; <a class="el" href="class_p4_1_1bitvec.html">bitvec</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>imem_slot_inuse</b> (gress_t gress)=0</td></tr>
<tr class="separator:a3649463084f9784508a21bae9fa77d49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace94da83b881ac9c942b1f15c58ad113" id="r_ace94da83b881ac9c942b1f15c58ad113"><td class="memItemLeft" align="right" valign="top"><a id="ace94da83b881ac9c942b1f15c58ad113" name="ace94da83b881ac9c942b1f15c58ad113"></a>
const <a class="el" href="class_b_f_n_1_1_alloc2_dbase.html">BFN::Alloc2Dbase</a>&lt; <a class="el" href="class_p4_1_1cstring.html">cstring</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>imem_use</b> (gress_t gress) const</td></tr>
<tr class="separator:ace94da83b881ac9c942b1f15c58ad113"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75546393b8b6b96d1a9fcb4c88cb42a0" id="r_a75546393b8b6b96d1a9fcb4c88cb42a0"><td class="memItemLeft" align="right" valign="top"><a id="a75546393b8b6b96d1a9fcb4c88cb42a0" name="a75546393b8b6b96d1a9fcb4c88cb42a0"></a>
virtual <a class="el" href="class_b_f_n_1_1_alloc2_dbase.html">BFN::Alloc2Dbase</a>&lt; <a class="el" href="class_p4_1_1cstring.html">cstring</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>imem_use</b> (gress_t gress)=0</td></tr>
<tr class="separator:a75546393b8b6b96d1a9fcb4c88cb42a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accacc996c7505e44dcfab0773c2e2edd" id="r_accacc996c7505e44dcfab0773c2e2edd"><td class="memItemLeft" align="right" valign="top"><a id="accacc996c7505e44dcfab0773c2e2edd" name="accacc996c7505e44dcfab0773c2e2edd"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>is_noop_slot</b> (int row, int color)</td></tr>
<tr class="separator:accacc996c7505e44dcfab0773c2e2edd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3765208dcfe21426c8bdd2d10766734c" id="r_a3765208dcfe21426c8bdd2d10766734c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3765208dcfe21426c8bdd2d10766734c">shared_instr</a> (const IR::MAU::Table *tbl, <a class="el" href="struct_instruction_memory_1_1_use.html">Use</a> &amp;alloc, bool gw_linked)</td></tr>
<tr class="separator:a3765208dcfe21426c8bdd2d10766734c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25c8ba670667de4cd5d2f9c04a6c659f" id="r_a25c8ba670667de4cd5d2f9c04a6c659f"><td class="memItemLeft" align="right" valign="top"><a id="a25c8ba670667de4cd5d2f9c04a6c659f" name="a25c8ba670667de4cd5d2f9c04a6c659f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>update</b> (const IR::MAU::Table *tbl)</td></tr>
<tr class="separator:a25c8ba670667de4cd5d2f9c04a6c659f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a556be49140e9cb8711781290e8ca5879" id="r_a556be49140e9cb8711781290e8ca5879"><td class="memItemLeft" align="right" valign="top"><a id="a556be49140e9cb8711781290e8ca5879" name="a556be49140e9cb8711781290e8ca5879"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>update</b> (<a class="el" href="class_p4_1_1cstring.html">cstring</a> name, const <a class="el" href="struct_table_resource_alloc.html">TableResourceAlloc</a> *alloc, const IR::MAU::Table *tbl)</td></tr>
<tr class="separator:a556be49140e9cb8711781290e8ca5879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d6304aa2e53859f1294feba5d6aeef9" id="r_a6d6304aa2e53859f1294feba5d6aeef9"><td class="memItemLeft" align="right" valign="top"><a id="a6d6304aa2e53859f1294feba5d6aeef9" name="a6d6304aa2e53859f1294feba5d6aeef9"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>update</b> (<a class="el" href="class_p4_1_1cstring.html">cstring</a> name, const <a class="el" href="struct_table_resource_alloc.html">TableResourceAlloc</a> *alloc, gress_t gress)</td></tr>
<tr class="separator:a6d6304aa2e53859f1294feba5d6aeef9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a743aec1c33ff35a08a57f7526547ca63" id="r_a743aec1c33ff35a08a57f7526547ca63"><td class="memItemLeft" align="right" valign="top"><a id="a743aec1c33ff35a08a57f7526547ca63" name="a743aec1c33ff35a08a57f7526547ca63"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>update</b> (<a class="el" href="class_p4_1_1cstring.html">cstring</a> name, const <a class="el" href="struct_instruction_memory_1_1_use.html">Use</a> &amp;alloc, gress_t gress)</td></tr>
<tr class="separator:a743aec1c33ff35a08a57f7526547ca63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af57b421dbb7454298315b8c17330f792" id="r_af57b421dbb7454298315b8c17330f792"><td class="memItemLeft" align="right" valign="top"><a id="af57b421dbb7454298315b8c17330f792" name="af57b421dbb7454298315b8c17330f792"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>update_always_run</b> (const <a class="el" href="struct_instruction_memory_1_1_use.html">Use</a> &amp;alloc, gress_t gress)</td></tr>
<tr class="separator:af57b421dbb7454298315b8c17330f792"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ae4c16925af54f7d5e7902507e416df1a" id="r_ae4c16925af54f7d5e7902507e416df1a"><td class="memItemLeft" align="right" valign="top"><a id="ae4c16925af54f7d5e7902507e416df1a" name="ae4c16925af54f7d5e7902507e416df1a"></a>
static <a class="el" href="struct_instruction_memory.html">InstructionMemory</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>create</b> ()</td></tr>
<tr class="separator:ae4c16925af54f7d5e7902507e416df1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a4342d33a868ac348f35757d55c705a2b" id="r_a4342d33a868ac348f35757d55c705a2b"><td class="memItemLeft" align="right" valign="top"><a id="a4342d33a868ac348f35757d55c705a2b" name="a4342d33a868ac348f35757d55c705a2b"></a>
std::set&lt; <a class="el" href="class_p4_1_1cstring.html">cstring</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>atcam_updates</b></td></tr>
<tr class="separator:a4342d33a868ac348f35757d55c705a2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64c8746964cd96d9cb8ab51b87ed5e68" id="r_a64c8746964cd96d9cb8ab51b87ed5e68"><td class="memItemLeft" align="right" valign="top"><a id="a64c8746964cd96d9cb8ab51b87ed5e68" name="a64c8746964cd96d9cb8ab51b87ed5e68"></a>
std::map&lt; const IR::MAU::ActionData *, const <a class="el" href="struct_instruction_memory_1_1_use.html">Use</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>shared_action_profiles</b></td></tr>
<tr class="separator:a64c8746964cd96d9cb8ab51b87ed5e68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a989001367468cc611b05e91a74dfa78c" id="r_a989001367468cc611b05e91a74dfa78c"><td class="memItemLeft" align="right" valign="top"><a id="a989001367468cc611b05e91a74dfa78c" name="a989001367468cc611b05e91a74dfa78c"></a>
const <a class="el" href="class_i_mem_spec.html">IMemSpec</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>spec</b></td></tr>
<tr class="separator:a989001367468cc611b05e91a74dfa78c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a54f3df015d058b7bcd2a45df0bb8c3fa" id="r_a54f3df015d058b7bcd2a45df0bb8c3fa"><td class="memItemLeft" align="right" valign="top"><a id="a54f3df015d058b7bcd2a45df0bb8c3fa" name="a54f3df015d058b7bcd2a45df0bb8c3fa"></a>
static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><b>NOOP_COLOR</b> = 0</td></tr>
<tr class="separator:a54f3df015d058b7bcd2a45df0bb8c3fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9ddcfd150f92e8b9c03f4ee8fd63ca7" id="r_ad9ddcfd150f92e8b9c03f4ee8fd63ca7"><td class="memItemLeft" align="right" valign="top"><a id="ad9ddcfd150f92e8b9c03f4ee8fd63ca7" name="ad9ddcfd150f92e8b9c03f4ee8fd63ca7"></a>
static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><b>NOOP_ROW</b> = 0</td></tr>
<tr class="separator:ad9ddcfd150f92e8b9c03f4ee8fd63ca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aca46dcc09258f44fa97b40f4474909a9" id="r_aca46dcc09258f44fa97b40f4474909a9"><td class="memItemLeft" align="right" valign="top"><a id="aca46dcc09258f44fa97b40f4474909a9" name="aca46dcc09258f44fa97b40f4474909a9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>InstructionMemory</b> (const <a class="el" href="class_i_mem_spec.html">IMemSpec</a> &amp;s)</td></tr>
<tr class="separator:aca46dcc09258f44fa97b40f4474909a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8ebe4b55cc6ddcbde5aa65e29692656" id="r_ad8ebe4b55cc6ddcbde5aa65e29692656"><td class="memItemLeft" align="right" valign="top"><a id="ad8ebe4b55cc6ddcbde5aa65e29692656" name="ad8ebe4b55cc6ddcbde5aa65e29692656"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>InstructionMemory</b> (const <a class="el" href="struct_instruction_memory.html">InstructionMemory</a> &amp;)=delete</td></tr>
<tr class="separator:ad8ebe4b55cc6ddcbde5aa65e29692656"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadb2898b0975799a1fb1c8d3f9082144" id="r_aadb2898b0975799a1fb1c8d3f9082144"><td class="memItemLeft" align="right" valign="top"><a id="aadb2898b0975799a1fb1c8d3f9082144" name="aadb2898b0975799a1fb1c8d3f9082144"></a>
<a class="el" href="struct_instruction_memory.html">InstructionMemory</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="struct_instruction_memory.html">InstructionMemory</a> &amp;)=delete</td></tr>
<tr class="separator:aadb2898b0975799a1fb1c8d3f9082144"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Algorithms for the allocation of the Instruction Memory. The Instruction Memory is defined in the uArch section 6.1.10.3 Action Instruction Memory.</p>
<p>The instruction memory is a 32 row x (PHV ALUs) per gress memory. Each action in P4 corresponds to a single RAM row in the IMEM. Each slot of a row corresponds to the instruction for that particular ALU. A noop instruction for an ALU is an all 0 encoded instruction. Thus an action in the P4 code coordinates to a single line in the instruction memory. For all PHVs that a particular action writes, the slots on that row will have the corresponding action, and for all PHVs that the particular action doesn't write, a noop, encoded as all 0s will let the PHV pass directly through. These instructions are called VLIW instructions, as one RAM line coordinates to hundreds of individual ALU instructions.</p>
<p>When a stage decides which actions to run, the RAM lines containing these actions are all ORed together to make a single instruction to be run by the ALUs. This is the root of action dependency. If two actions in the same packet operate on the same ALU, then their corresponding instruction opcodes will be ORed together, causing the instruction to be garbled and incorrect. (N.B. There is a possibility of removing action dependencies, if it is known that this ORing won't have any semantic change to the instruction)</p>
<p>Each instruction memory line has two colors. Two actions can be stored per RAM line as the actions on that RAM line can have a different color. This will only work if the intersection of the PHV writes for these actions are an empty set, as each individual ALU instruction can be marked a certain color.</p>
<p>Furthermore, actions can be shared across multiple tables, as long as the action opcodes are identical. The main corner case for this is a noop action, which usually appears in several tables. In both gresses, currently, the algorithm always reserves the first imem slot with the 0 color to be noop. Gateways that inhibit can potentially run an action as well, if the pfe for the imem is always defaulted on. Thus when the payload is all 0s, the instruction just runs a noop </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a3765208dcfe21426c8bdd2d10766734c" name="a3765208dcfe21426c8bdd2d10766734c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3765208dcfe21426c8bdd2d10766734c">&#9670;&#160;</a></span>shared_instr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool InstructionMemory::shared_instr </td>
          <td>(</td>
          <td class="paramtype">const IR::MAU::Table *</td>          <td class="paramname"><span class="paramname"><em>tbl</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_instruction_memory_1_1_use.html">Use</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>alloc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>gw_linked</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If two tables share an action profile, then the instruction memory location can be the exact same across both tables. However, the mem code for the instructions may need to differ.</p>
<p>Say for example, we had two tables {t1, t2} share an action profile that had the same 4 actions, {a1, a2, a3, a4 }. Four actions would require two bits of RAM line per entry. Let's say however, that one of the tables, with an action profile, i.e t2, is linked with a gateway. A gateway requires an action_instruction_adr_map_data entry as well, as the gateway goes through the hit pathway.</p>
<p>Thus in our example, t2 would require 5 instruction entries, and thus 3 bits of indirection, while t1 would only require 2 bits. Furthermore, if the gateway goes to row 0, then the an action encoding in t2 wouldn't fit within the 2 bits.</p>
<p>This function is to share the instruction memory line, while determining the correct memcode per action. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.12.0-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="struct_instruction_memory.html">InstructionMemory</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
