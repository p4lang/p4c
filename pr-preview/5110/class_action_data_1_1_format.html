<!-- HTML header for doxygen 1.13.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>P4 Compiler Documentation (P4C): ActionData::Format Class Reference</title>
<link rel="icon" href="p4-fav.svg" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!--  Add link to paragraphs   -->
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
  DoxygenAwesomeParagraphLink.init()
</script>
<!-- Add copy button to code fragments  -->
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
  DoxygenAwesomeFragmentCopyButton.init()
</script>
<!-- Add dark mode toggle -->
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
  DoxygenAwesomeDarkModeToggle.init()
</script>
<!-- Add interactive TOC -->
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
  DoxygenAwesomeInteractiveToc.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-interactive-toc.js" rel="stylesheet" type="text/css"/>
<link href="cards.css" rel="stylesheet" type="text/css"/>
<link href="flow.css" rel="stylesheet" type="text/css"/>
<link href="p4c_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="p4-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">P4C
   </div>
   <div id="projectbrief">The P4 Compiler</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('class_action_data_1_1_format.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="class_action_data_1_1_format-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ActionData::Format Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_action_data_1_1_format_1_1_use.html">Use</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af94cc41de617b203a23ba4191732f5cb" id="r_af94cc41de617b203a23ba4191732f5cb"><td class="memItemLeft" align="right" valign="top"><a id="af94cc41de617b203a23ba4191732f5cb" name="af94cc41de617b203a23ba4191732f5cb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Format</b> (<a class="el" href="class_phv_info.html">PhvInfo</a> &amp;p, const IR::MAU::Table *t, const <a class="el" href="struct_reduction_or_info.html">ReductionOrInfo</a> &amp;ri, <a class="el" href="class_split_attached_info.html">SplitAttachedInfo</a> &amp;sai)</td></tr>
<tr class="separator:af94cc41de617b203a23ba4191732f5cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aceb0803ea362ee4ea8f78c2eb5b46253" id="r_aceb0803ea362ee4ea8f78c2eb5b46253"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aceb0803ea362ee4ea8f78c2eb5b46253">allocate_format</a> (IR::MAU::Table::ImmediateControl_t imm_ctrl, <a class="el" href="class_action_data_1_1_format_type__t.html">FormatType_t</a> format_type)</td></tr>
<tr class="separator:aceb0803ea362ee4ea8f78c2eb5b46253"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ae5436434c116611c9317a0cadcf24b" id="r_a8ae5436434c116611c9317a0cadcf24b"><td class="memItemLeft" align="right" valign="top"><a id="a8ae5436434c116611c9317a0cadcf24b" name="a8ae5436434c116611c9317a0cadcf24b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>set_uses</b> (<a class="el" href="class_p4_1_1safe__vector.html">safe_vector</a>&lt; <a class="el" href="struct_action_data_1_1_format_1_1_use.html">Use</a> &gt; *u)</td></tr>
<tr class="separator:a8ae5436434c116611c9317a0cadcf24b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a53aae861ac69eaeef703ce98e994a003" id="r_a53aae861ac69eaeef703ce98e994a003"><td class="memItemLeft" align="right" valign="top"><a id="a53aae861ac69eaeef703ce98e994a003" name="a53aae861ac69eaeef703ce98e994a003"></a>
static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><b>ACTION_RAM_BYTES</b> = 16</td></tr>
<tr class="separator:a53aae861ac69eaeef703ce98e994a003"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4cf25e1c5a211153ff4e3e64cf177a4" id="r_af4cf25e1c5a211153ff4e3e64cf177a4"><td class="memItemLeft" align="right" valign="top"><a id="af4cf25e1c5a211153ff4e3e64cf177a4" name="af4cf25e1c5a211153ff4e3e64cf177a4"></a>
static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><b>IMMEDIATE_BITS</b> = 32</td></tr>
<tr class="separator:af4cf25e1c5a211153ff4e3e64cf177a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaed7c6a802b498874aae2886f43b3e3b" id="r_aaed7c6a802b498874aae2886f43b3e3b"><td class="memItemLeft" align="right" valign="top"><a id="aaed7c6a802b498874aae2886f43b3e3b" name="aaed7c6a802b498874aae2886f43b3e3b"></a>
static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><b>METER_COLOR_SIZE</b> = 8</td></tr>
<tr class="separator:aaed7c6a802b498874aae2886f43b3e3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf95193fd6eb6c289a61ad81b74a584c" id="r_adf95193fd6eb6c289a61ad81b74a584c"><td class="memItemLeft" align="right" valign="top"><a id="adf95193fd6eb6c289a61ad81b74a584c" name="adf95193fd6eb6c289a61ad81b74a584c"></a>
static constexpr int&#160;</td><td class="memItemRight" valign="bottom"><b>METER_COLOR_START_BIT</b> = IMMEDIATE_BITS - METER_COLOR_SIZE</td></tr>
<tr class="separator:adf95193fd6eb6c289a61ad81b74a584c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aceb0803ea362ee4ea8f78c2eb5b46253" name="aceb0803ea362ee4ea8f78c2eb5b46253"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aceb0803ea362ee4ea8f78c2eb5b46253">&#9670;&#160;</a></span>allocate_format()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ActionData::Format::allocate_format </td>
          <td>(</td>
          <td class="paramtype">IR::MAU::Table::ImmediateControl_t</td>          <td class="paramname"><span class="paramname"><em>imm_ctrl</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_action_data_1_1_format_type__t.html">FormatType_t</a></td>          <td class="paramname"><span class="paramname"><em>format_type</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Builds a vector of potential action data packings. The following are potential notes for later improvements and criticisms. </p><pre class="fragment">1. The algorithm for determining the balance between Action Data Table and Immediate space
   might not be the long term solution, as I had the idea to possibly run the condense
   algorithm over two separate spaces.  Right now, the condense algorithm runs assuming
   that all data will be packed in the same area, specifically Action Data RAM.  Perhaps
   the long term solution is to condense into two spaces simultaneously, immediate and
   action data.

2. The naming is fairly cumbersome.  Specifically the terms slots and sections appear, and
   mean different things.  Slots refer to Action Data Bus Input Slots, which come from the
   ALUOperation objects, while Sections refer to the RamSection class,
   which through the condense algorithm, can have multiple ALUOperation objects.
   Separate analysis over these object is necessary, but the naming can be confusing.

3. The algorithm is not finely tuned to save Action Data Bus resources, though usually this
   isn't the constraint that prevents tables from fitting.  I think before trying to
   optimize this for Action Data Bus, other portions of the Action Data Bus algorithm can
   improve, e.g. O(n^2) approach of allocating all tables simultaneously rather than one at
   a time, mutual exclusive optimizations, and the extra copies of the entry from lsb.
</pre> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.13.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_action_data.html">ActionData</a></li><li class="navelem"><a class="el" href="class_action_data_1_1_format.html">Format</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
