<!-- HTML header for doxygen 1.13.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>P4 Compiler Documentation (P4C): PHV::LiveRangeInfo Class Reference</title>
<link rel="icon" href="p4-fav.svg" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!--  Add link to paragraphs   -->
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
  DoxygenAwesomeParagraphLink.init()
</script>
<!-- Add copy button to code fragments  -->
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
  DoxygenAwesomeFragmentCopyButton.init()
</script>
<!-- Add dark mode toggle -->
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
  DoxygenAwesomeDarkModeToggle.init()
</script>
<!-- Add interactive TOC -->
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
  DoxygenAwesomeInteractiveToc.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-interactive-toc.js" rel="stylesheet" type="text/css"/>
<link href="cards.css" rel="stylesheet" type="text/css"/>
<link href="flow.css" rel="stylesheet" type="text/css"/>
<link href="p4c_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="p4-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">P4C
   </div>
   <div id="projectbrief">The P4 Compiler</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('class_p_h_v_1_1_live_range_info.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_p_h_v_1_1_live_range_info-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">PHV::LiveRangeInfo Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aa06fa1331c01e96ba48c80b2344eb797" id="r_aa06fa1331c01e96ba48c80b2344eb797"><td class="memItemLeft" align="right" valign="top"><a id="aa06fa1331c01e96ba48c80b2344eb797" name="aa06fa1331c01e96ba48c80b2344eb797"></a>enum class &#160;</td><td class="memItemRight" valign="bottom"><b>OpInfo</b> { <br />
&#160;&#160;<b>DEAD</b>
, <b>READ</b>
, <b>WRITE</b>
, <b>READ_WRITE</b>
, <br />
&#160;&#160;<b>LIVE</b>
<br />
 }</td></tr>
<tr class="separator:aa06fa1331c01e96ba48c80b2344eb797"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a05dc6963112dbf3ed9098f946bb82ba4" id="r_a05dc6963112dbf3ed9098f946bb82ba4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a05dc6963112dbf3ed9098f946bb82ba4">can_overlay</a> (const <a class="el" href="class_p_h_v_1_1_live_range_info.html">LiveRangeInfo</a> &amp;other) const</td></tr>
<tr class="separator:a05dc6963112dbf3ed9098f946bb82ba4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fdc61702de5eb65a46129d5447ca173" id="r_a4fdc61702de5eb65a46129d5447ca173"><td class="memItemLeft" align="right" valign="top"><a id="a4fdc61702de5eb65a46129d5447ca173" name="a4fdc61702de5eb65a46129d5447ca173"></a>
OpInfo &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>deparser</b> ()</td></tr>
<tr class="separator:a4fdc61702de5eb65a46129d5447ca173"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a116358a312c3c2835c958fa035af7ec7" id="r_a116358a312c3c2835c958fa035af7ec7"><td class="memItemLeft" align="right" valign="top"><a id="a116358a312c3c2835c958fa035af7ec7" name="a116358a312c3c2835c958fa035af7ec7"></a>
const OpInfo &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>deparser</b> () const</td></tr>
<tr class="separator:a116358a312c3c2835c958fa035af7ec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4d9b1e04789a241d86724a906769208" id="r_aa4d9b1e04789a241d86724a906769208"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="struct_p_h_v_1_1_live_range.html">LiveRange</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa4d9b1e04789a241d86724a906769208">disjoint_ranges</a> () const</td></tr>
<tr class="separator:aa4d9b1e04789a241d86724a906769208"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3931857c27afcb5f2e33fcb9ae841d83" id="r_a3931857c27afcb5f2e33fcb9ae841d83"><td class="memItemLeft" align="right" valign="top"><a id="a3931857c27afcb5f2e33fcb9ae841d83" name="a3931857c27afcb5f2e33fcb9ae841d83"></a>
OpInfo &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>parser</b> ()</td></tr>
<tr class="separator:a3931857c27afcb5f2e33fcb9ae841d83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d92c20fe487586b7a19e491000ca9a9" id="r_a4d92c20fe487586b7a19e491000ca9a9"><td class="memItemLeft" align="right" valign="top"><a id="a4d92c20fe487586b7a19e491000ca9a9" name="a4d92c20fe487586b7a19e491000ca9a9"></a>
const OpInfo &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>parser</b> () const</td></tr>
<tr class="separator:a4d92c20fe487586b7a19e491000ca9a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b354f6133579f25e6e6fef3eb45bdd0" id="r_a8b354f6133579f25e6e6fef3eb45bdd0"><td class="memItemLeft" align="right" valign="top"><a id="a8b354f6133579f25e6e6fef3eb45bdd0" name="a8b354f6133579f25e6e6fef3eb45bdd0"></a>
OpInfo &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>stage</b> (int i)</td></tr>
<tr class="separator:a8b354f6133579f25e6e6fef3eb45bdd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ad70fb7787739282863c3a2491b02f2" id="r_a0ad70fb7787739282863c3a2491b02f2"><td class="memItemLeft" align="right" valign="top"><a id="a0ad70fb7787739282863c3a2491b02f2" name="a0ad70fb7787739282863c3a2491b02f2"></a>
const OpInfo &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>stage</b> (int i) const</td></tr>
<tr class="separator:a0ad70fb7787739282863c3a2491b02f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8a4d80f52770e8a38ee13c73279bf76" id="r_ab8a4d80f52770e8a38ee13c73279bf76"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_p4_1_1safe__vector.html">safe_vector</a>&lt; OpInfo &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab8a4d80f52770e8a38ee13c73279bf76">vec</a> () const</td></tr>
<tr class="separator:ab8a4d80f52770e8a38ee13c73279bf76"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a64532ff1ecb927ce1d55a6eeba97d3c2" id="r_a64532ff1ecb927ce1d55a6eeba97d3c2"><td class="memItemLeft" align="right" valign="top">static std::vector&lt; <a class="el" href="struct_p_h_v_1_1_live_range.html">LiveRange</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a64532ff1ecb927ce1d55a6eeba97d3c2">merge_invalid_ranges</a> (const std::vector&lt; <a class="el" href="struct_p_h_v_1_1_live_range.html">LiveRange</a> &gt; &amp;ranges)</td></tr>
<tr class="separator:a64532ff1ecb927ce1d55a6eeba97d3c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5601e1475c509378c9f9195a986be0c4" id="r_a5601e1475c509378c9f9195a986be0c4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5601e1475c509378c9f9195a986be0c4">set_num_table_stages</a> (int stage)</td></tr>
<tr class="separator:a5601e1475c509378c9f9195a986be0c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a05dc6963112dbf3ed9098f946bb82ba4" name="a05dc6963112dbf3ed9098f946bb82ba4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05dc6963112dbf3ed9098f946bb82ba4">&#9670;&#160;</a></span>can_overlay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PHV::LiveRangeInfo::can_overlay </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_p_h_v_1_1_live_range_info.html">LiveRangeInfo</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>other</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>true when this and <code class="param">other</code> can be overlaid, defined as: (1) For any stage <em>s</em>, at least one of OpInfo at <em>s</em> of this or <code class="param">other</code> is dead. (2) Except for the write-after-read case that: For example P 0 1 2 3 4 D A W L L R D D D B D D D W L L R A and B can be overlaid because the Write at stage 2 of B actually happens after the Read of A at stage 2, i.e., for write, we require Dead in the next stage, instead of the corresponding stage. Note that, we cannot overlay in this case: P 0 1 2 3 4 D A W L L R D D D B D D W RW L L R TODO: we do not need to use this function during PHV allocation because AllocSlices already have the presice live range info already. This function is kept here for future overlay analysis before PHV allocation. </dd></dl>

</div>
</div>
<a id="aa4d9b1e04789a241d86724a906769208" name="aa4d9b1e04789a241d86724a906769208"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4d9b1e04789a241d86724a906769208">&#9670;&#160;</a></span>disjoint_ranges()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="struct_p_h_v_1_1_live_range.html">LiveRange</a> &gt; PHV::LiveRangeInfo::disjoint_ranges </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>a vector of disjoint live ranges. For example P 0 1 2 3 4 ... D Foo W R D W L L L R Foo.disjoint_ranges() = [(-1W, 0R), (2W, 12R)] // if tofino stage of parse is -1, mau stages starts from 0 and deparser is device::max_stage(). Uninitialized reads, that are not caught by parser implicit init or when auto-init-metadata are not enabled, will have a short live range [xR, xR]. These short live ranges should be treated as overlayable to any other live ranges. contract: for every paired def and use, all stages in between are marked as LIVE. NOTE: Even if IDs of units seem to be using the same schema as min-stage-based StageAndAccess, they are not. The previous StageAndAccess use max_min_stage + 1 as deparser, which was very error-prone because dependency graph can be changed. </dd></dl>

</div>
</div>
<a id="a64532ff1ecb927ce1d55a6eeba97d3c2" name="a64532ff1ecb927ce1d55a6eeba97d3c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64532ff1ecb927ce1d55a6eeba97d3c2">&#9670;&#160;</a></span>merge_invalid_ranges()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="struct_p_h_v_1_1_live_range.html">LiveRange</a> &gt; PHV::LiveRangeInfo::merge_invalid_ranges </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="struct_p_h_v_1_1_live_range.html">LiveRange</a> &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>ranges</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>a new vector of live ranges that consecutive invalid live ranges will be merged into one. For example, {(1R, 1R), (2R, 2R), (5R, 5R), (6W, 10R)} =&gt; {(1R, 5R), (6W, 10R)} {(1R, 1W), (2W, 2W), (3W, 3W)} =&gt; {(1R, 1W), (2W, 3W)} premise: <code class="param">ranges</code> must be disjoint and sorted in increasing order of LiveRange. a compiler BUG will be thrown if not satisfied. </dd></dl>

</div>
</div>
<a id="a5601e1475c509378c9f9195a986be0c4" name="a5601e1475c509378c9f9195a986be0c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5601e1475c509378c9f9195a986be0c4">&#9670;&#160;</a></span>set_num_table_stages()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void PHV::LiveRangeInfo::set_num_table_stages </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>stage</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Record the number of table stages in use</p>
<p>Minimum size is <code>Device::numStages()</code> </p>

</div>
</div>
<a id="ab8a4d80f52770e8a38ee13c73279bf76" name="ab8a4d80f52770e8a38ee13c73279bf76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8a4d80f52770e8a38ee13c73279bf76">&#9670;&#160;</a></span>vec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_p4_1_1safe__vector.html">safe_vector</a>&lt; OpInfo &gt; &amp; PHV::LiveRangeInfo::vec </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>live info in a vector: [Parser 0 1 ... max_stage Deparser] </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.13.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_p_h_v.html">PHV</a></li><li class="navelem"><a class="el" href="class_p_h_v_1_1_live_range_info.html">LiveRangeInfo</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
