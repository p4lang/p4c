<!-- HTML header for doxygen 1.13.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>P4 Compiler Documentation (P4C): P4::IR::MAU::Table::payload_info_t Struct Reference</title>
<link rel="icon" href="p4-fav.svg" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<!--  Add link to paragraphs   -->
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
  DoxygenAwesomeParagraphLink.init()
</script>
<!-- Add copy button to code fragments  -->
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
  DoxygenAwesomeFragmentCopyButton.init()
</script>
<!-- Add dark mode toggle -->
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
  DoxygenAwesomeDarkModeToggle.init()
</script>
<!-- Add interactive TOC -->
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
  DoxygenAwesomeInteractiveToc.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-interactive-toc.js" rel="stylesheet" type="text/css"/>
<link href="cards.css" rel="stylesheet" type="text/css"/>
<link href="flow.css" rel="stylesheet" type="text/css"/>
<link href="p4c_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="p4-logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">P4C
   </div>
   <div id="projectbrief">The P4 Compiler</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('struct_p4_1_1_i_r_1_1_m_a_u_1_1_table_1_1payload__info__t.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="struct_p4_1_1_i_r_1_1_m_a_u_1_1_table_1_1payload__info__t-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">P4::IR::MAU::Table::payload_info_t Struct Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:struct_p4_1_1_i_r_1_1_m_a_u_1_1_table_1_1payload__info__t_1_1info__t" id="r_struct_p4_1_1_i_r_1_1_m_a_u_1_1_table_1_1payload__info__t_1_1info__t"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#struct_p4_1_1_i_r_1_1_m_a_u_1_1_table_1_1payload__info__t_1_1info__t">info_t</a></td></tr>
<tr class="separator:struct_p4_1_1_i_r_1_1_m_a_u_1_1_table_1_1payload__info__t_1_1info__t"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a78e6a73bf1e38b5eb700db32df3537f9" id="r_a78e6a73bf1e38b5eb700db32df3537f9"><td class="memItemLeft" align="right" valign="top"><a id="a78e6a73bf1e38b5eb700db32df3537f9" name="a78e6a73bf1e38b5eb700db32df3537f9"></a>
std::map&lt; <a class="el" href="class_p4_1_1cstring.html">cstring</a>, <a class="el" href="#struct_p4_1_1_i_r_1_1_m_a_u_1_1_table_1_1payload__info__t_1_1info__t">info_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>action_info</b></td></tr>
<tr class="separator:a78e6a73bf1e38b5eb700db32df3537f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7401910c68f6932d3c550d195f87051" id="r_ae7401910c68f6932d3c550d195f87051"><td class="memItemLeft" align="right" valign="top"><a id="ae7401910c68f6932d3c550d195f87051" name="ae7401910c68f6932d3c550d195f87051"></a>
<a class="el" href="class_p4_1_1_visitor.html">Visitor</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>post_payload</b> = nullptr</td></tr>
<tr class="separator:ae7401910c68f6932d3c550d195f87051"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The potential control flow(s) through an IR::MAU::Table object are quite complex, which causes its visit_children methods to be quite complex as well.</p>
<p>An IR::MAU::Table object corresponds to a Tofino hardware table, which includes a match table (which may hit or miss) and a gateway that may override the match table or not. After the match or gateway result, there may be an action to run which can trigger attached tables, or attached tables may be triggered unconditionally. Finally, a next table may trigger (enable) other tables.</p>
<p>Conceptually, the match and gateway portions of the table run simultaneously. If a gateway row matches, the highest priority (first) matching gateway_row determines the result &ndash; either allow the match table to act normally, or override it, specifying both a payload (action to run) and a next table. If all the gateway rows miss, the final gateway miss result controls whether the match table runs or is overridden. A table with no gateway rows has a notional gateway with a miss action that does not override the match table (so it runs normally)</p>
<p>note that all gateway override actions (icluding the gateway "miss" action) count as hit actions (follow the hit pathway in match central).</p>
<p>To follow this control flow in visit_children, we first visit all the gateway expressions since they are evaluated simultaneously. In theory, if a high priority row matches, the later rows don't actually matter, so we could visit them sequentially (treating the later ones as dead when the earlier ones match), but we currently do not (fixing this could allow more/better dead code elimination).</p>
<p>We then find the gateway rows that override the match table and save them in the payload_info_t saved state. We then visit the match keys (so match keys will be treated as dead on paths that involve gateway overrides &ndash; even though the match is actually evaluated simultaneously as the gateway in the hardware, it is safe to treat as dead as the match result will be completely ignored if the gateway overrides.</p>
<p>After the visiting the match key, we visit each action with union of state from the gateway payloads and match result that can trigger that action. After all actions have been visited, we visit the next tables with the union of the actions that can trigger each next, which may be from gateway override, match action chain, or match hit/miss.</p>
<p>finally, we visit all the attached tables. This is incorrect for the flow order, so flow analysis through attached tables will not be correct </p>
</div><hr/><h2 class="groupheader">Class Documentation</h2>
<a name="struct_p4_1_1_i_r_1_1_m_a_u_1_1_table_1_1payload__info__t_1_1info__t" id="struct_p4_1_1_i_r_1_1_m_a_u_1_1_table_1_1payload__info__t_1_1info__t"></a>
<h2 class="memtitle"><span class="permalink"><a href="#struct_p4_1_1_i_r_1_1_m_a_u_1_1_table_1_1payload__info__t_1_1info__t">&#9670;&#160;</a></span>P4::IR::MAU::Table::payload_info_t::info_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct P4::IR::MAU::Table::payload_info_t::info_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"></div><table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a id="adf7326c6fab9339e95213149e93c18f3" name="adf7326c6fab9339e95213149e93c18f3"></a><a class="el" href="class_p4_1_1_visitor.html">Visitor</a> *</td>
<td class="fieldname">
flow_state</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ad0c86de7df041f82b85825e8586e065d" name="ad0c86de7df041f82b85825e8586e065d"></a>set&lt; <a class="el" href="class_p4_1_1cstring.html">cstring</a> &gt;</td>
<td class="fieldname">
tags</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a78e6a73bf1e38b5eb700db32df3537f9" name="a78e6a73bf1e38b5eb700db32df3537f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78e6a73bf1e38b5eb700db32df3537f9">&#9670;&#160;</a></span>action_info</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="class_p4_1_1cstring.html">cstring</a>, <a class="el" href="#struct_p4_1_1_i_r_1_1_m_a_u_1_1_table_1_1payload__info__t_1_1info__t">info_t</a>&gt; P4::IR::MAU::Table::payload_info_t::action_info</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae7401910c68f6932d3c550d195f87051" name="ae7401910c68f6932d3c550d195f87051"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7401910c68f6932d3c550d195f87051">&#9670;&#160;</a></span>post_payload</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_p4_1_1_visitor.html">Visitor</a>* P4::IR::MAU::Table::payload_info_t::post_payload = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.13.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_p4.html">P4</a></li><li class="navelem"><b>IR</b></li><li class="navelem"><b>MAU</b></li><li class="navelem"><b>Table</b></li><li class="navelem"><a class="el" href="struct_p4_1_1_i_r_1_1_m_a_u_1_1_table_1_1payload__info__t.html">payload_info_t</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
